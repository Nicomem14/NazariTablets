!function(window){function init(){var overlay=document.createElement("div");overlay.setAttribute("id","sw-lightbox-overlay"),overlay.innerHTML='<a id="sw-close-light">    <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">        <g stroke="#fff" stroke-width="2px" fill="none"><path d="m0,0l30,30"></path><path d="m30,0l-30,30"></path></g>    </svg></a> <div id="sw-image-container">   <div id="sw-image-wrapper">       <img id="sw-image">       <video id="sw-video" autoplay loop></video>   </div>   <div id="sw-image-details">       <div id="sw-image-top-container">           <div id="sw-shoppable-links"></div>           <div id="sw-image-caption"></div>           <div id="sw-image-caption-short"></div>           <div id="sw-image-share">               <a href="" title="Share this on Facebook" target="_blank" id="sw-image-share-facebook">Facebook</a>               <a href="" title="Share this on Twitter" target="_blank" id="sw-image-share-twitter">Twitter</a>               <a href="" title="Share this on Pinterest" target="_blank" id="sw-image-share-pinterest">Pinterest</a>               <a href="" title="Share this via Email" id="sw-image-share-email">Email</a>           </div>       </div>       <div id="sw-image-bottom-container">           <a href="" id="sw-image-source"></a>       </div>   </div>   <a id="sw-lightbox-navigation-left">        <svg class="icon-arrow icon-arrow--left" width="100" height="100">           <path d="M10,10 L90,10 L90,90" />       </svg>   </a>    <a id="sw-lightbox-navigation-right">        <svg class="icon-arrow icon-arrow--right" width="100" height="100">           <path d="M10,10 L90,10 L90,90" />       </svg>   </a> </div>',document.body.appendChild(overlay)}function closeLightBoxEvent(e){var overlay=document.getElementById("sw-lightbox-overlay"),closeButton=document.getElementById("sw-close-light"),image=document.getElementById("sw-image");e.target!==overlay&&e.target.parentNode!==closeButton&&e.target!==closeButton&&e.target!==image||closeLightBox()}function closeLightBox(){var overlay=document.getElementById("sw-lightbox-overlay"),image=document.getElementById("sw-image"),video=document.getElementById("sw-video");overlay.className=overlay.className.replace("open",""),image.setAttribute("src",""),video.setAttribute("src",""),window.removeEventListener("keydown",keypressNavigate)}function navigateLeftEvent(e){var button=document.getElementById("sw-lightbox-navigation-left");e.target!==button&&e.target.parentNode!==button||navigateLeft()}function navigateLeft(){renderItem(navigateItem(currentItem.id,itemsData.media,-1),itemsData.type)}function navigateRightEvent(e){var button=document.getElementById("sw-lightbox-navigation-right");e.target!==button&&e.target.parentNode!==button||navigateRight()}function navigateRight(){renderItem(navigateItem(currentItem.id,itemsData.media,1),itemsData.type)}function openLightBox(data){var item=data.media[findItemIndex(data.id,data.media)],leftNavigationButton=document.getElementById("sw-lightbox-navigation-left"),rightNavigationButton=document.getElementById("sw-lightbox-navigation-right"),overlay=document.getElementById("sw-lightbox-overlay");itemsData=data,currentItem=item,renderItem(item,data.type),leftNavigationButton.addEventListener("click",navigateLeftEvent,!1),rightNavigationButton.addEventListener("click",navigateRightEvent,!1),overlay.className="open",overlay.className+=" "+data.type,overlay.addEventListener("click",closeLightBoxEvent,!1),window.addEventListener("keydown",keypressNavigate,!1),window.focus()}function keypressNavigate(e){switch(e.keyCode){case 39:navigateRight();break;case 37:navigateLeft();break;case 28:closeLightBox()}}function renderItem(item,type){var image=document.getElementById("sw-image"),video=document.getElementById("sw-video"),imageWrapper=document.getElementById("sw-image-wrapper"),caption=document.getElementById("sw-image-caption"),shortCaption=document.getElementById("sw-image-caption-short"),source=document.getElementById("sw-image-source"),shoppableLinks=document.getElementById("sw-shoppable-links"),facebookShare=document.getElementById("sw-image-share-facebook"),twitterShare=document.getElementById("sw-image-share-twitter"),pinterestShare=document.getElementById("sw-image-share-pinterest"),emailShare=document.getElementById("sw-image-share-email"),baseImageSize=320;currentItem=item,preloadItem(item.id,itemsData.media),removeElementsByClass("media-item-link-container"),removeElementsByClass("sw-shoppable-link"),shoppableLinks.className="","video"===item.type?(image.className="hidden",video.className=video.className.replace("hidden",""),video.setAttribute("src",item.videos.large.url),video.setAttribute("poster",item.images.large.url),video.setAttribute("alt",item.user.username)):(video.className="hidden",video.pause(),image.className=image.className.replace("hidden",""),image.addEventListener("load",function(){if("shoppable"===type&&item.shoppable&&item.shoppable.id){var linkCount=item.shoppable.links.length;linkCount>0&&(shoppableLinks.className="with-links");for(var i=0;i<linkCount;i++){var top=item.shoppable.links[i].y_coordinate*(imageWrapper.clientHeight/baseImageSize)-15,left=item.shoppable.links[i].x_coordinate*(imageWrapper.clientWidth/baseImageSize)-15,mouseOverAction="document.getElementById('media-item-link-"+i+"').className = 'media-item-link show';",mouseOutAction="document.getElementById('media-item-link-"+i+"').className = 'media-item-link';",shoppableLink='<a href="'+item.shoppable.links[i].link_url+'" title="'+item.shoppable.links[i].description+'" target="_self" class="media-item-link-container"><span id="media-item-link-'+i+'" class="media-item-link" style="top: '+top+"px; left: "+left+'px;">'+(i+1)+"</span></a>",shoppableLinkDescription='<a onmouseover="'+mouseOverAction+'" onmouseout="'+mouseOutAction+'" href="'+item.shoppable.links[i].link_url+'" target="_self" class="sw-shoppable-link">'+(i+1)+" - "+item.shoppable.links[i].description+"</a>";document.getElementById("media-item-link-"+i)||(imageWrapper.innerHTML+=shoppableLink,shoppableLinks.innerHTML+=shoppableLinkDescription)}}},!1),image.setAttribute("src",item.images.large.url),image.setAttribute("alt",item.user.username)),caption.innerHTML=linkify(truncateString(item.caption,600),item.media_service).replace(/(?:\r\n|\r|\n)/g,"<br>"),shortCaption.innerHTML=linkify(truncateString(item.caption,190),item.media_service).replace(/(?:\r\n|\r|\n)/g,"<br>"),source.setAttribute("href",item.link),source.innerHTML=item.user.username+" | "+item.media_service+" | "+getDate(new Date(1e3*item.created_at)),emailShare.setAttribute("href","mailto:?subject="+item.user.username+" on "+capitalizeFirstLetter(item.media_service)+"&body="+item.caption+" - "+encodeURIComponent(item.link)),twitterShare.setAttribute("href","https://twitter.com/share?url="+encodeURIComponent(item.link)+"&text="+encodeURIComponentCustom(item.caption.substring(0,110))+"...&original_referer="+encodeURIComponent(document.location.href)),facebookShare.setAttribute("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(item.link)),pinterestShare.setAttribute("href","http://pinterest.com/pin/create/button/?url="+encodeURIComponent(item.link)+"&media="+encodeURIComponent(item.images.large.url)+"&description="+encodeURIComponent(item.caption))}function encodeURIComponentCustom(text){try{return encodeURIComponent(text)}catch(err){return""}}function preloadItem(id,media){var prevImage=new Image,nextImage=new Image;index=findItemIndex(id,media),prevIndex=0===index?media.length-1:index-1,nextIndex=index===media.length-1?0:index+1,prevImage.src=media[prevIndex].images.large.url,nextImage.src=media[nextIndex].images.large.url}function navigateItem(id,media,step){return index=findItemIndex(id,media)+step,index=index===media.length?0:index<0?media.length-1:index,media[index]}function findItemIndex(id,media){if(media)for(var i=media.length-1;i>=0;i--)if(media[i].id===id)return i;return 0}function getDate(date){var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return date.getDate()+" "+months[date.getMonth()]+" "+date.getFullYear()}function linkify(text,service){var urls=/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/gi,tags=/#([\S]*)/gi,usernames=/@([\S]*)/gi,tagUrl="",usernameUrl="";switch(service){case"instagram":tagUrl='<a href="https://www.instagram.com/explore/tags/$1" class="sw-url-link" target="_blank">#$1</a>',usernameUrl='<a href="https://www.instagram.com/$1" class="sw-url-link" target="_blank">@$1</a>';break;case"twitter":tagUrl='<a href="https://twitter.com/hashtag/$1" class="sw-url-link" target="_blank">#$1</a>',usernameUrl='<a href="https://twitter.com/$1" class="sw-url-link" target="_blank">@$1</a>';break;case"facebook":tagUrl='<a href="https://www.facebook.com/hashtag/$1" class="sw-url-link" target="_blank">#$1</a>',usernameUrl='<a href="https://www.facebook.com/$1" class="sw-url-link" target="_blank">@$1</a>'}return text.replace(urls,'<a href="$1" class="sw-url-link" target="_blank">$1</a>').replace(tags,tagUrl).replace(usernames,usernameUrl)}function truncateString(text,length){return text.length>length?text.substring(0,length-3)+"...":text}function removeElementsByClass(className){for(var elements=document.getElementsByClassName(className);elements.length>0;)elements[0].parentNode.removeChild(elements[0])}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}var eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventer=window[eventMethod],itemsData={},currentItem={},messageEvent="attachEvent"==eventMethod?"onmessage":"message";init(),eventer(messageEvent,function(e){e.origin.match(/snapwidget/i)&&e.data&&"lightbox"===e.data.action&&openLightBox(e.data)},!1)}(window||{});